<!DOCTYPE html>
<head></head>
<body></body>

<script>
var numIslands = function(grid) {
  let total = 0
  if (grid.length === 0) { return total }
  /**
   * DFS
   * 遍历到【1】时，重置为【0】，然后把这个元素的上下左右是【1】的也重置为【0】
  */
  grid.map((item, rowIndex) => {
    item.map((subItem, columnIndex) => {
      if (subItem === '1') {
        grid[rowIndex][columnIndex] = '0'
        total += 1 // 岛屿数量 +1
        setAround(rowIndex, columnIndex, grid)
      }
    })
  })
  return total
}

function setAround(rowIndex, columnIndex, originData) {
  // top
  const needSet = []
  if (originData[rowIndex - 1] && originData[rowIndex - 1][columnIndex] === '1') {
    needSet.push([rowIndex - 1, columnIndex])
  }
  // right
  if (originData[rowIndex][columnIndex + 1] === '1') {
    needSet.push([rowIndex, columnIndex + 1])
  }
  // bottom
  if (originData[rowIndex + 1] && originData[rowIndex + 1][columnIndex] === '1') {
    needSet.push([rowIndex + 1, columnIndex])
  }
  // left
  if (originData[rowIndex][columnIndex - 1] === '1') {
    needSet.push([rowIndex, columnIndex - 1])
  }
  for (const item of needSet) {
    if (item.every(item => item >= 0)) {
      originData[item[0]][item[1]] = '0'
      setAround(item[0], item[1], originData) // 递归重置
    }
  }
}

const data1 = [["0","1","0","1","0"],["1","1","0","1","0"],["1","1","0","0","0"],["0","0","0","0","0"]]
// 01010
// 11010
// 11000
// 00000
// 2

const data2 = [["0","1","0","1","0"],["1", "0", "1", "0", "1"],["0","1","0","1","0"],["1", "0", "1", "0", "1"]]
// 01010
// 10101
// 01010
// 10101
// 10

const data3 = [["1","1","0","0","0"],["1","1","0","0","0"],["0","0","1","0","0"],["0","0","0","1","1"]]
// 11000
// 11000
// 00100
// 00011
// 3

const data4 = [["1","1","1","1","1"],["1","1","1","1","1"],["1","1","1","1","1"],["1","1","1","1","1"]]
// 11111
// 11111
// 11111
// 11111
// 1

const data5 = [["1","1","1"],["0","1","0"],["1","1","1"]]
// 111
// 010
// 111
// 1

console.log(numIslands(data5))

</script>
